!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).Pristine=r()}(this,(function(){"use strict";var e={ja:{required:"こちらの項目は必須項目です",email:"有効なメールアドレスを入力してください",number:"は数値で入力してください",integer:"は整数で入力してください",url:"URLが無効です",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"${1}文字以上の半角英数字を入力してください",min:"は${1}より大きい値にしてください",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match","required-group":"こちらの項目は必須項目です","integer-group":"は整数で入力してください",greater:"上限金額は下限金額よりも多く設定してください"}};function r(e,r){for(;(e=e.parentElement)&&!e.classList.contains(r););return e}function t(e){var r=arguments;return this.replace(/\${([^{}]*)}/g,(function(e,t){return r[t]}))}function n(e){return e.pristine.self.form.querySelectorAll('input[name="'+e.getAttribute("name")+'"]:checked').length}var i={classTo:"form-group",errorClass:"has-error",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},a=["required","min","max","minlength","maxlength","pattern"],s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,l="ja",u={},f=function(e,r){r.name=e,void 0===r.priority&&(r.priority=1),u[e]=r};function c(n,s,f){var c=this;function p(e,r,t,n){var i=u[t];if(i&&(e.push(i),n)){var a="pattern"===t?[n]:n.split(",");a.unshift(null),r[t]=a}}function m(r){for(var n=[],i=!0,a=0;r.validators[a];a++){var s=r.validators[a],o=r.params[s.name]?r.params[s.name]:[];if(o[0]=r.input.value,!s.fn.apply(r.input,o)&&(i=!1,"function"==typeof s.msg?n.push(s.msg(r.input.value,o)):"string"==typeof s.msg?n.push(t.apply(s.msg,o)):s.msg===Object(s.msg)&&s.msg[l]?n.push(t.apply(s.msg[l],o)):r.messages[l]&&r.messages[l][s.name]?n.push(t.apply(r.messages[l][s.name],o)):e[l]&&e[l][s.name]?n.push(t.apply(e[l][s.name],o)):n.push(t.apply(e[l].default,o)),!0===s.halt))break}return r.errors=n,i}function d(e){if(e.errorElements)return e.errorElements;var t=r(e.input,c.config.classTo),n=null,i=null;return(n=c.config.classTo===c.config.errorTextParent?t:t.querySelector("."+c.config.errorTextParent))&&((i=n.querySelector(".pristine-error"))||((i=document.createElement(c.config.errorTextTag)).className="pristine-error "+c.config.errorTextClass,n.appendChild(i),i.pristineDisplay=i.style.display)),e.errorElements=[t,i]}function h(e){var r=d(e),t=r[0],n=r[1];t&&(t.classList.remove(c.config.successClass),t.classList.add(c.config.errorClass)),n&&(n.innerHTML=e.errors.join("<br/>"),n.style.display=n.pristineDisplay||"")}function g(e){var r=function(e){var r=d(e),t=r[0],n=r[1];return t&&(t.classList.remove(c.config.errorClass),t.classList.remove(c.config.successClass)),n&&(n.innerHTML="",n.style.display="none"),r}(e)[0];r&&r.classList.add(c.config.successClass)}return function(e,r,t){e.setAttribute("novalidate","true"),c.form=e,c.config=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e}(r||{},i),c.live=!(!1===t),c.fields=Array.from(e.querySelectorAll("input:not([type^=hidden]):not([type^=submit]):not([disabled]), select, textarea")).map(function(e){var r=[],t={},n={};return[].forEach.call(e.attributes,(function(e){if(/^data-pristine-/.test(e.name)){var i=e.name.substr(14),s=i.match(o);if(null!==s){var l=void 0===s[1]?"ja":s[1];return n.hasOwnProperty(l)||(n[l]={}),void(n[l][i.slice(0,i.length-s[0].length)]=e.value)}"type"===i&&(i=e.value),p(r,t,i,e.value)}else~a.indexOf(e.name)?p(r,t,e.name,e.value):"type"===e.name&&p(r,t,e.value)})),r.sort((function(e,r){return r.priority-e.priority})),c.live&&e.addEventListener(~["radio","checkbox"].indexOf(e.getAttribute("type"))?"change":"input",function(e){c.validate(e.target)}.bind(c)),e.pristine={input:e,validators:r,params:t,messages:n,self:c}}.bind(c))}(n,s,f),c.validate=function(e,r){r=e&&!0===r||!0===e;var t=c.fields;!0!==e&&!1!==e&&(e instanceof HTMLElement?t=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(t=Array.from(e).map((function(e){return e.pristine}))));for(var n=!0,i=0;t[i];i++){var a=t[i];m(a)?!r&&g(a):(n=!1,!r&&h(a))}return n},c.getErrors=function(e){if(!e){for(var r=[],t=0;t<c.fields.length;t++){var n=c.fields[t];n.errors.length&&r.push({input:n.input,errors:n.errors})}return r}return e.tagName&&"select"===e.tagName.toLowerCase()?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors},c.addValidator=function(e,r,t,n,i){e instanceof HTMLElement?(e.pristine.validators.push({fn:r,msg:t,priority:n,halt:i}),e.pristine.validators.sort((function(e,r){return r.priority-e.priority}))):console.warn("The parameter elem must be a dom element")},c.addError=function(e,r){(e=e.length?e[0]:e).pristine.errors.push(r),h(e.pristine)},c.reset=function(){for(var e=0;c.fields[e];e++)c.fields[e].errorElements=null;Array.from(c.form.querySelectorAll(".pristine-error")).map((function(e){e.parentNode.removeChild(e)})),Array.from(c.form.querySelectorAll("."+c.config.classTo)).map((function(e){e.classList.remove(c.config.successClass),e.classList.remove(c.config.errorClass)}))},c.destroy=function(){c.reset(),c.fields.forEach((function(e){delete e.input.pristine})),c.fields=[]},c.setGlobalConfig=function(e){i=e},c}return f("text",{fn:function(e){return!0},priority:0}),f("required",{fn:function(e){return"radio"===this.type||"checkbox"===this.type?n(this):void 0!==e&&""!==e},priority:99,halt:!0}),f("email",{fn:function(e){return!e||s.test(e)}}),f("number",{fn:function(e){return!e||!isNaN(parseFloat(e))},priority:2}),f("integer",{fn:function(e){return!e||/^\d+$/.test(e)}}),f("minlength",{fn:function(e,r){return!e||e.length>=parseInt(r)}}),f("maxlength",{fn:function(e,r){return!e||e.length<=parseInt(r)}}),f("min",{fn:function(e,r){return!e||("checkbox"===this.type?n(this)>=parseInt(r):parseFloat(e)>=parseFloat(r))}}),f("max",{fn:function(e,r){return!e||("checkbox"===this.type?n(this)<=parseInt(r):parseFloat(e)<=parseFloat(r))}}),f("pattern",{fn:function(e,r){var t=r.match(new RegExp("^/(.*?)/([gimy]*)$"));return!e||new RegExp(t[1],t[2]).test(e)}}),f("equals",{fn:function(e,r){var t=document.querySelector(r);return t&&(!e&&!t.value||t.value===e)}}),f("required-group",{fn:function(){var e=r(this,i.classTo).querySelectorAll("[data-pristine-required-group]:not([disabled]");if(0===e.length)return!0;var t=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){if(""!==s.value.value)return!0}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}return!1},priority:3,halt:!0}),f("integer-group",{fn:function(){var e=r(this,i.classTo).querySelectorAll("[data-pristine-required-group]"),t=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var l=s.value;if(!/^\d*$/.test(l.value))return!1}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}return!0},priority:2,halt:!0}),f("greater",{fn:function(e,r){var t=document.querySelector(r);return!t.value||!e||Number(t.value)<Number(e)}}),c.addValidator=function(e,r,t,n,i){f(e,{fn:r,msg:t,priority:n,halt:i})},c.addMessages=function(r,t){var n=e.hasOwnProperty(r)?e[r]:e[r]={};Object.keys(t).forEach((function(e,r){n[e]=t[e]}))},c.setLocale=function(e){l=e},c}));
